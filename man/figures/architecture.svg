<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 580" font-family="'Palatino Linotype','Georgia','Noto Serif KR',serif">
  <defs>
    <marker id="arrow" markerWidth="7" markerHeight="5" refX="7" refY="2.5" orient="auto">
      <polygon points="0 0, 7 2.5, 0 5" fill="#333"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="580" fill="#fffff8"/>

  <!-- Title -->
  <text x="450" y="36" text-anchor="middle" font-size="18" fill="#111" font-weight="600" letter-spacing="0.5">pandoc-hwpx</text>
  <text x="450" y="56" text-anchor="middle" font-size="11" fill="#888" font-style="italic">Quarto to HWPX Conversion Pipeline</text>

  <!-- ═══════════ TOP: Quarto Pipeline ═══════════ -->

  <text x="24" y="96" font-size="9" fill="#999" letter-spacing="1.5" font-variant="small-caps">QUARTO PIPELINE</text>
  <line x1="24" y1="101" x2="200" y2="101" stroke="#ddd" stroke-width="0.5"/>

  <!-- .qmd -->
  <rect x="24" y="112" width="100" height="44" rx="2" fill="none" stroke="#333" stroke-width="1"/>
  <text x="74" y="131" text-anchor="middle" font-size="11" fill="#333">.qmd</text>
  <text x="74" y="147" text-anchor="middle" font-size="8" fill="#888">format: hwpx-docx</text>

  <line x1="124" y1="134" x2="162" y2="134" stroke="#333" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- Quarto render -->
  <rect x="168" y="112" width="110" height="44" rx="2" fill="#f4f1eb" stroke="#333" stroke-width="1"/>
  <text x="223" y="131" text-anchor="middle" font-size="11" fill="#333" font-weight="600">Quarto</text>
  <text x="223" y="147" text-anchor="middle" font-size="9" fill="#666">render</text>

  <line x1="278" y1="134" x2="316" y2="134" stroke="#333" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- Pandoc -->
  <rect x="322" y="112" width="110" height="44" rx="2" fill="#f4f1eb" stroke="#333" stroke-width="1"/>
  <text x="377" y="131" text-anchor="middle" font-size="11" fill="#333" font-weight="600">Pandoc</text>
  <text x="377" y="147" text-anchor="middle" font-size="9" fill="#666">JSON AST</text>

  <line x1="432" y1="134" x2="470" y2="134" stroke="#333" stroke-width="1" marker-end="url(#arrow)"/>

  <!-- Lua Filter -->
  <rect x="476" y="112" width="120" height="44" rx="2" fill="#eef0f6" stroke="#667" stroke-width="1"/>
  <text x="536" y="131" text-anchor="middle" font-size="10" fill="#333" font-weight="600">Lua Filter</text>
  <text x="536" y="147" text-anchor="middle" font-size="8" fill="#666">hwpx-filter.lua</text>

  <!-- Lua filter annotations -->
  <text x="536" y="172" text-anchor="middle" font-size="8" fill="#999" font-style="italic">citeproc + TOC detection</text>
  <text x="536" y="183" text-anchor="middle" font-size="8" fill="#999" font-style="italic">pandoc.pipe('python3', ...)</text>

  <line x1="596" y1="134" x2="634" y2="134" stroke="#333" stroke-width="1" marker-end="url(#arrow)"/>
  <text x="618" y="127" font-size="8" fill="#999" font-style="italic">JSON</text>

  <!-- ═══════════ RIGHT: Converter Engine ═══════════ -->

  <rect x="640" y="88" width="240" height="220" rx="3" fill="#fafaf5" stroke="#333" stroke-width="1.5"/>
  <text x="760" y="108" text-anchor="middle" font-size="12" fill="#111" font-weight="600">PandocHwpxConverter</text>
  <text x="760" y="121" text-anchor="middle" font-size="9" fill="#999" font-style="italic">converter.py  ~2,000 lines</text>
  <line x1="655" y1="128" x2="865" y2="128" stroke="#ddd" stroke-width="0.5"/>

  <!-- Stage 1 -->
  <circle cx="666" cy="148" r="10" fill="#e8e5de" stroke="#999" stroke-width="0.5"/>
  <text x="666" y="151" text-anchor="middle" font-size="8" fill="#555" font-weight="600">1</text>
  <text x="684" y="152" font-size="10" fill="#333">Meta extraction</text>
  <text x="684" y="163" font-size="8" fill="#999">title, author, date</text>

  <!-- Stage 2 -->
  <circle cx="666" cy="184" r="10" fill="#e8e5de" stroke="#999" stroke-width="0.5"/>
  <text x="666" y="187" text-anchor="middle" font-size="8" fill="#555" font-weight="600">2</text>
  <text x="684" y="188" font-size="10" fill="#333">Template loading</text>
  <text x="684" y="199" font-size="8" fill="#999">blank.hwpx</text>

  <!-- Stage 3 -->
  <circle cx="666" cy="220" r="10" fill="#e8e5de" stroke="#999" stroke-width="0.5"/>
  <text x="666" y="223" text-anchor="middle" font-size="8" fill="#555" font-weight="600">3</text>
  <text x="684" y="224" font-size="10" fill="#333">Block processing</text>
  <text x="684" y="235" font-size="8" fill="#999">Header, Para, Table, List, ...</text>

  <!-- Stage 4 -->
  <circle cx="666" cy="256" r="10" fill="#e8e5de" stroke="#999" stroke-width="0.5"/>
  <text x="666" y="259" text-anchor="middle" font-size="8" fill="#555" font-weight="600">4</text>
  <text x="684" y="260" font-size="10" fill="#333">Inline formatting</text>
  <text x="684" y="271" font-size="8" fill="#999">Bold, Code, Link, Image, Math</text>

  <!-- Stage 5 -->
  <circle cx="666" cy="292" r="10" fill="#e8e5de" stroke="#999" stroke-width="0.5"/>
  <text x="666" y="295" text-anchor="middle" font-size="8" fill="#555" font-weight="600">5</text>
  <text x="684" y="296" font-size="10" fill="#333">XML assembly + ZIP</text>

  <!-- Vertical connectors -->
  <line x1="666" y1="158" x2="666" y2="174" stroke="#ccc" stroke-width="0.5" stroke-dasharray="2,2"/>
  <line x1="666" y1="194" x2="666" y2="210" stroke="#ccc" stroke-width="0.5" stroke-dasharray="2,2"/>
  <line x1="666" y1="230" x2="666" y2="246" stroke="#ccc" stroke-width="0.5" stroke-dasharray="2,2"/>
  <line x1="666" y1="266" x2="666" y2="282" stroke="#ccc" stroke-width="0.5" stroke-dasharray="2,2"/>

  <!-- Arrow from converter to HWPX -->
  <line x1="760" y1="308" x2="760" y2="342" stroke="#333" stroke-width="1" marker-end="url(#arrow)"/>
  <text x="770" y="332" font-size="8" fill="#999" font-style="italic">ZIP</text>

  <!-- ═══════════ LEFT MARGIN: Key Modules ═══════════ -->

  <text x="24" y="222" font-size="9" fill="#999" letter-spacing="1.5" font-variant="small-caps">KEY MODULES</text>
  <line x1="24" y1="227" x2="160" y2="227" stroke="#ddd" stroke-width="0.5"/>
  <text x="24" y="244" font-size="9" fill="#555">math_converter.py</text>
  <text x="28" y="256" font-size="8" fill="#999" font-style="italic">LaTeX to HWP equation script</text>
  <text x="24" y="274" font-size="9" fill="#555">lineseg.py</text>
  <text x="28" y="286" font-size="8" fill="#999" font-style="italic">line break calculation for Mac</text>

  <!-- ═══════════ BOTTOM: HWPX Structure ═══════════ -->

  <rect x="190" y="350" width="680" height="212" rx="3" fill="#fafaf5" stroke="#333" stroke-width="1.5"/>
  <text x="530" y="372" text-anchor="middle" font-size="13" fill="#111" font-weight="600">output.hwpx</text>
  <text x="530" y="386" text-anchor="middle" font-size="9" fill="#999" font-style="italic">HWPX = ZIP archive containing OOXML-like structure</text>
  <line x1="205" y1="393" x2="855" y2="393" stroke="#ddd" stroke-width="0.5"/>

  <!-- Contents/ -->
  <text x="215" y="414" font-size="10" fill="#333" font-weight="600">Contents/</text>

  <!-- section0.xml -->
  <rect x="230" y="424" width="160" height="60" rx="2" fill="#eef4ee" stroke="#8a8" stroke-width="0.8"/>
  <text x="310" y="442" text-anchor="middle" font-size="10" fill="#333" font-weight="600">section0.xml</text>
  <text x="310" y="455" text-anchor="middle" font-size="8" fill="#666">hp:p  hp:tbl  hp:pic</text>
  <text x="310" y="466" text-anchor="middle" font-size="8" fill="#666">hp:equation  hp:footNote</text>
  <text x="310" y="477" text-anchor="middle" font-size="8" fill="#999" font-style="italic">document body</text>

  <!-- header.xml -->
  <rect x="406" y="424" width="160" height="60" rx="2" fill="#eeeef4" stroke="#88a" stroke-width="0.8"/>
  <text x="486" y="442" text-anchor="middle" font-size="10" fill="#333" font-weight="600">header.xml</text>
  <text x="486" y="455" text-anchor="middle" font-size="8" fill="#666">fontfaces  charProperties</text>
  <text x="486" y="466" text-anchor="middle" font-size="8" fill="#666">paraProperties  styles</text>
  <text x="486" y="477" text-anchor="middle" font-size="8" fill="#999" font-style="italic">style definitions</text>

  <!-- content.hpf -->
  <rect x="582" y="424" width="160" height="60" rx="2" fill="#f4eee8" stroke="#a86" stroke-width="0.8"/>
  <text x="662" y="442" text-anchor="middle" font-size="10" fill="#333" font-weight="600">content.hpf</text>
  <text x="662" y="455" text-anchor="middle" font-size="8" fill="#666">metadata  manifest</text>
  <text x="662" y="466" text-anchor="middle" font-size="8" fill="#666">image references</text>
  <text x="662" y="477" text-anchor="middle" font-size="8" fill="#999" font-style="italic">package manifest</text>

  <!-- BinData/ -->
  <text x="215" y="508" font-size="10" fill="#333" font-weight="600">BinData/</text>

  <!-- Images box -->
  <rect x="230" y="516" width="160" height="40" rx="2" fill="#f8f4f0" stroke="#baa" stroke-width="0.8"/>
  <text x="310" y="534" text-anchor="middle" font-size="10" fill="#333">images</text>
  <text x="310" y="546" text-anchor="middle" font-size="8" fill="#999" font-style="italic">.png  .jpg  embedded</text>

  <!-- Fonts box -->
  <rect x="406" y="516" width="160" height="40" rx="2" fill="#f8f4f0" stroke="#baa" stroke-width="0.8"/>
  <text x="486" y="534" text-anchor="middle" font-size="10" fill="#333">fonts</text>
  <text x="486" y="546" text-anchor="middle" font-size="8" fill="#999" font-style="italic">NanumSquare  D2Coding  ...</text>

  <!-- mimetype + META-INF -->
  <rect x="582" y="516" width="160" height="40" rx="2" fill="#f0f0f0" stroke="#aaa" stroke-width="0.8"/>
  <text x="662" y="534" text-anchor="middle" font-size="10" fill="#333">mimetype</text>
  <text x="662" y="546" text-anchor="middle" font-size="8" fill="#999" font-style="italic">META-INF/container.xml</text>

  <!-- Bottom note -->
  <line x1="24" y1="570" x2="876" y2="570" stroke="#eee" stroke-width="0.5"/>
  <text x="24" y="576" font-size="8" fill="#bbb">XML namespace prefixes hp:, hs:, hc:, hh: are preserved as raw strings for HWP Mac compatibility.  Korean typography: NanumSquare + D2Coding + NimbusSanL + STIX Two.</text>
</svg>
